#  TODO list
## Цель проекта: 
Телеграм бот для веб-студии **PHOENIX**, созданный в целях автоматизации различных процессов внутри студии

## Функционал бота:
1. Система проверки подписки на тг-канал
2. Просмотр каталога с услугами/товарами студии
3. Реализация процесса оформления заказа товара/услуги
4. Система тех. поддержки
5. Всеразличная автоматическая реклама для подписчиков
6. Промокоды для товаров/услуг
7. Админка для создателя
8. Возможность создавать товары/услуги из админки
9. Возможность отключать товары/услуги из админки
10. Возможность удалять товары/услуги из админки
11. Возможность редактировать товары/услуги из админки
12. Также возможность взаимодействовать с промокодами (создание/удаление/редактирование)
13. Также реализовать систему администраторов тех. поддержки (тобишь тех, кто может взаимодействовать с тикетами) (Далее Сапортам)
14. Возможность сапортам закрывать тикеты
15. Возможность сапортам открывать тикеты
16. Возможность сапортам перенаправлять тикеты
17. Возможность сапортам просматривать открытые и закрытые тикеты
18. Также уведомления для сапортов о том, что пришел новый тикет

## SOFT skills
| Язык программирования: Python ver 3.12

| База данных: PostgreSQL

| ORM: SQLAlchemy

## Процесс регистрации юзера:
После перехода в нашего бота автоматически Telegram предлагает нам нажать кнопку **/start**, тем самым после отправки данной команды должна срабатывать функция с приветствием и занесением нового пользователя в бд
**Таблица юзера в бд:**
1. id: PK
2. telegram_id: INT (inique)
3. email: INT (inuque, blank, null)
4. created_on: DATETIME

## Каталог товаров:
После отправки команды /catalog - пользователю отправляется сообщение со всеми доступными в БД товарами
**Таблица товаров в бд:**
1. id: PK
2. title: VARCHAR (50, inique)
3. description: VARCHAR (100)
4. image: IMG
5. created_on: DATETIME
6. updated_on: DATETIME
7. price: INT
8. diedline: INT

## Процесс оформления заказа:
После выбора какого-либо товара из каталога, начинается **процесс оформления заказа (он реализован на стейтах):**

• Пользователю предлагается указать свою почту для связи

• Далее в базе данных редактируется текущий юзер (вставляем туда указанную почту)

• Стейт юзера переходит в ожидание исполнителя и также создается запись в БД

• Администратору приходит уведомление о том, что был создан новый заказ

**Таблица заказов в бд:**
1. id: PK
2. product: FK (таблица товаров)
3. user: FK (таблица юзеров)
4. state: INT (создан, в работе, завершен)
5. created_on: DATETIME
6. updated_on: DATETIME

## Система тех. поддержки
Юзеру предлагается отправить команду, при помощи которой будет вызван Агент Тех. поддержки с целью помощи в его вопросах. После отправки команды он переходит в стейт, в котором должен указать свою проблему
**Процесс создания тикета:**

• Пользователь отправляет команду и переходит в стейт

• Пользователь указывает свой вопрос/проблему

• Пользователя перекидывает в стейт ожидания, в котором он не может взаимодействовать с ботом до закрытия тикета

• Далее агентам ТП приходит уведомление о новом тикете

**Таблица тикетов в бд:**
1. id: PK
2. user: FK (таблица юзеров)
3. answer: VARCHAR (200)
4. state: INT (создан, взят в работу, закрыт)
5. support: FK (таблица агентов ТП, null, blank)

После того, как Агенты ТП получили уведомление о том, что создан новый тикет - они могут как-либо взаимодействовать с ним. Допустим бот разослал всем уведомление о созданном тикете. Далее агенты тп через специальную команду получают список всех открытых тикетов (которые подгружаются с бд) и могут выбрать, что сделать с тем или иным тикетом. После того, как один из агентов ТП нажал "взять в работу" - данный тикет становится недоступным для других агентов ТП
